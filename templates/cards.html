
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;900&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="{{ url_for('static', filename='dojo_banzai_logo.jpg') }}" alt="Logo Dojo" class="logo">
            <h1>{{ title }}</h1>
            <p class="subtitle">Competición oficial - Modalidad Kata</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <input type="text" placeholder="🔍 Buscar competidor..." id="searchInput">
            </div>
            <div class="control-group">
                <select id="categoryFilter">
                    <option value="">📊 Todas las categorías</option>
                </select>
            </div>
            <div class="control-group">
                <select id="poolFilter">
                    <option value="">🏊 Todos los pools</option>
                </select>
            </div>
            <button class="copy-link" onclick="copyLink()">
                🔗 Compartir
            </button>
        </div>

        <div class="cards-grid" id="cardsGrid">
            {% for row in data %}
                <div class="card" data-category="{{ row['Categoría'] }}" data-pool="{{ row['Pool'] }}">
                    <div class="card-header">
                        <div class="belt-rank">🥋</div>
                        <div class="fighter-info">
                            <div class="fighter-avatar">
                                {{ row['Nombre y Apellido'][:1] }}
                            </div>
                            <div class="fighter-details">
                                <h3>{{ row['Nombre y Apellido'] }}</h3>
                                <div class="category-tag">{{ row['Categoría'] }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-icon">🥋</span>
                                <div class="stat-label">Kata</div>
                                <div class="stat-value">{{ row['Nombre Kata'] }}</div>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">🏟️</span>
                                <div class="stat-label">Tatami</div>
                                <div class="stat-value">{{ row['Tatami'] }}</div>
                            </div>
                            <div class="pool-indicator">
                                🏊 Pool {{ row['Pool'] }}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <script>
        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const button = document.querySelector('.copy-link');
                const originalText = button.textContent;
                button.textContent = '✅ Copiado!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const poolFilter = document.getElementById('poolFilter');
        const cards = document.querySelectorAll('.card');

        const categories = new Set();
        const pools = new Set();
        cards.forEach(card => {
            categories.add(card.dataset.category);
            pools.add(card.dataset.pool);
        });
        categories.forEach(cat => {
            const opt = document.createElement('option');
            opt.value = opt.textContent = cat;
            categoryFilter.appendChild(opt);
        });
        pools.forEach(p => {
            const opt = document.createElement('option');
            opt.value = opt.textContent = p;
            poolFilter.appendChild(opt);
        });

        function filterCards() {
            const name = searchInput.value.toLowerCase();
            const cat = categoryFilter.value;
            const pool = poolFilter.value;
            cards.forEach(card => {
                const matchName = card.textContent.toLowerCase().includes(name);
                const matchCat = !cat || card.dataset.category === cat;
                const matchPool = !pool || card.dataset.pool === pool;
                card.style.display = matchName && matchCat && matchPool ? 'block' : 'none';
            });
        }

        searchInput.addEventListener('input', filterCards);
        categoryFilter.addEventListener('change', filterCards);
        poolFilter.addEventListener('change', filterCards);
    </script>
</body>
</html>
